"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[991],{24991:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(85439),l=n(36380),r=n(61391),c=n(60319),i=n(46342),s=n(93553),o=n(67550),h=n(7671),Z=n(41075),d=n(13780),u=n(5896),p=n(83249),m=n(79906),g=n(56961),f=n(62197),y=n(85801),w=n(2784),x=n(61877),C=n(21548),b=n(73557),k=n(7300),v=n(87985),P=n(50875),S=n(46026),T=n(59236),$=n(29117),B=n(70630),I=n(51077),X=n(25870),K=n(97856),N=n(10002),z=n(36617),j=n(82716),L=n(36893),M=n(45069),V=n(1661),W=n(40775),D=n(41015),E=n(52903);let G,_=e=>e;const A=w.lazy((()=>n.e(592).then(n.bind(n,1296)))),H={xs:1,sm:2,md:3,lg:4,xl:4},O={xs:6,sm:8,md:12,lg:16,xl:16},F=Object.keys(M.V3);function q(){const{t:e}=(0,C.$G)(["page_character","charNames_gen"]),{database:t}=(0,w.useContext)(X.t),[n,q]=(0,w.useState)((()=>t.displayCharacter.get()));(0,w.useEffect)((()=>t.displayCharacter.follow(((e,t)=>q(t)))),[t,q]);const[U,Y]=(0,w.useState)(""),J=(0,w.useDeferredValue)(U),Q=(0,w.useRef)(null),ee=(0,w.useCallback)(((e,n)=>{var a;null==(a=Q.current)||a.scrollIntoView({behavior:"smooth"}),t.displayCharacter.set({pageIndex:n-1})}),[t,Q]),te=(0,j.Z)(),ne=O[te],[ae,le]=(0,w.useState)(!1),[re,ce]=(0,z.Z)();(0,w.useEffect)((()=>(x.ZP.send({hitType:"pageview",page:"/characters"}),t.chars.followAny(((e,t)=>("new"===t||"remove"===t)&&ce())))),[ce,t]),(0,w.useEffect)((()=>t.charMeta.followAny((e=>ce()))),[ce,t]);const{gender:ie}=(0,N.Z)(),se=(0,w.useCallback)((async n=>{const a=await(0,B.m)(n,ie);let l=null==a?void 0:a.name;"object"==typeof l&&(l=e(`charNames_gen:${(0,L.LP)(n,ie)}`)),window.confirm(e("removeCharacter",{value:l}))&&t.chars.remove(n)}),[t,ie,e]),oe=(0,K.Z)(),he=(0,b.s0)(),Ze=(0,w.useDeferredValue)(n),de=(0,w.useDeferredValue)(re),{charKeyList:ue,totalCharNum:pe}=(0,w.useMemo)((()=>{var e;const n=t.chars.keys.length,{element:a,weaponType:l,sortType:r,ascending:c}=Ze,i=t.chars.keys.filter((0,V.C)({element:a,weaponType:l,name:J},(0,M.zU)(t))).sort((0,V.e)(null!=(e=M.V3[r])?e:[],c,(0,M._L)(t),["new","favorite"]));return de&&{charKeyList:i,totalCharNum:n}}),[de,t,Ze,J]),{weaponType:me,element:ge,sortType:fe,ascending:ye,pageIndex:we=0}=n,{charKeyListToShow:xe,numPages:Ce,currentPageIndex:be}=(0,w.useMemo)((()=>{const e=Math.ceil(ue.length/ne),t=(0,D.uZ)(we,0,e-1);return{charKeyListToShow:ue.slice(t*ne,(t+1)*ne),numPages:e,currentPageIndex:t}}),[ue,we,ne]),ke=ue.length!==pe?`${ue.length}/${pe}`:`${pe}`,ve=(0,w.useMemo)((()=>(0,W.W)(L.yd,(e=>Object.entries(t.chars.data).forEach((([n,a])=>{const l=t.weapons.get(a.equippedWeapon);if(!l)return;const r=(0,I.ub)(l.key).weaponType;e[r].total++,ue.includes(n)&&e[r].current++}))))),[t,ue]),Pe=(0,w.useMemo)((()=>(0,W.W)(L.N,(e=>Object.entries(t.chars.data).forEach((([n,a])=>{const l=(0,B.m)(a.key,t.gender).elementKey;e[l].total++,ue.includes(n)&&e[l].current++}))))),[t,ue]);return(0,E.BX)(o.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,E.tZ)(w.Suspense,{fallback:!1,children:(0,E.tZ)(A,{newFirst:!0,show:ae,onHide:()=>le(!1),onSelect:oe})}),(0,E.tZ)(v.Z,{ref:Q,children:(0,E.BX)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,E.BX)(Z.ZP,{container:!0,spacing:1,children:[(0,E.tZ)(Z.ZP,{item:!0,children:(0,E.tZ)($.Z,{sx:{height:"100%"},onChange:e=>t.displayCharacter.set({weaponType:e}),value:me,totals:ve,size:"small"})}),(0,E.tZ)(Z.ZP,{item:!0,children:(0,E.tZ)(T.Z,{sx:{height:"100%"},onChange:e=>t.displayCharacter.set({element:e}),value:ge,totals:Pe,size:"small"})}),(0,E.tZ)(Z.ZP,{item:!0,flexGrow:1}),(0,E.tZ)(Z.ZP,{item:!0,children:(0,E.tZ)(d.Z,{autoFocus:!0,value:U,onChange:e=>Y(e.target.value),label:e("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,E.BX)(o.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:[(0,E.tZ)(u.Z,{count:Ce,page:be+1,onChange:ee}),(0,E.tZ)(R,{numShowing:xe.length,total:ke,t:e}),(0,E.tZ)(S.Z,{sortKeys:F,value:fe,onChange:e=>t.displayCharacter.set({sortType:e}),ascending:ye,onChangeAsc:e=>t.displayCharacter.set({ascending:e})})]})]})}),(0,E.tZ)(p.Z,{fullWidth:!0,onClick:()=>le(!0),color:"info",startIcon:(0,E.tZ)(s.Z,{}),children:e(G||(G=_`addNew`))}),(0,E.tZ)(w.Suspense,{fallback:(0,E.tZ)(m.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,E.tZ)(Z.ZP,{container:!0,spacing:1,columns:H,children:xe.map((t=>(0,E.tZ)(Z.ZP,{item:!0,xs:1,children:(0,E.tZ)(P.Z,{characterKey:t,onClick:()=>he(`${t}`),footer:(0,E.BX)(E.HY,{children:[(0,E.tZ)(g.Z,{}),(0,E.BX)(o.Z,{sx:{py:1,px:2,display:"flex",gap:1,justifyContent:"space-between"},children:[(0,E.tZ)(k.Z,{placement:"top",title:(0,E.tZ)(f.Z,{children:e("tabs.talent")}),children:(0,E.tZ)(y.Z,{onClick:()=>he(`${t}/talent`),children:(0,E.tZ)(a.Z,{})})}),(0,E.tZ)(k.Z,{placement:"top",title:(0,E.tZ)(f.Z,{children:e("tabs.teambuffs")}),children:(0,E.tZ)(y.Z,{onClick:()=>he(`${t}/teambuffs`),children:(0,E.tZ)(l.Z,{})})}),(0,E.tZ)(k.Z,{placement:"top",title:(0,E.tZ)(f.Z,{children:e("tabs.optimize")}),children:(0,E.tZ)(y.Z,{onClick:()=>he(`${t}/optimize`),children:(0,E.tZ)(r.Z,{})})}),(0,E.tZ)(k.Z,{placement:"top",title:(0,E.tZ)(f.Z,{children:e("tabs.theorycraft")}),children:(0,E.tZ)(y.Z,{onClick:()=>he(`${t}/theorycraft`),children:(0,E.tZ)(c.Z,{})})}),(0,E.tZ)(g.Z,{orientation:"vertical"}),(0,E.tZ)(k.Z,{placement:"top",title:(0,E.tZ)(f.Z,{children:e("delete")}),children:(0,E.tZ)(y.Z,{color:"error",onClick:()=>se(t),children:(0,E.tZ)(i.Z,{})})})]})]})})},t)))})}),Ce>1&&(0,E.tZ)(v.Z,{children:(0,E.BX)(h.Z,{sx:{display:"flex",gap:1},children:[(0,E.tZ)(p.Z,{onClick:()=>le(!0),color:"info",sx:{minWidth:0},children:(0,E.tZ)(s.Z,{})}),(0,E.BX)(Z.ZP,{container:!0,alignItems:"flex-end",sx:{flexGrow:1},children:[(0,E.tZ)(Z.ZP,{item:!0,flexGrow:1,children:(0,E.tZ)(u.Z,{count:Ce,page:be+1,onChange:ee})}),(0,E.tZ)(Z.ZP,{item:!0,children:(0,E.tZ)(R,{numShowing:xe.length,total:ke,t:e})})]})]})})]})}function R({numShowing:e,total:t,t:n}){return(0,E.tZ)(f.Z,{color:"text.secondary",children:(0,E.BX)(C.cC,{t:n,i18nKey:"showingNum",count:e,value:t,children:["Showing ",(0,E.tZ)("b",{children:{count:e}})," out of ",{value:t}," Characters"]})})}}}]);